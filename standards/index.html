<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Standards | BNA Mechanics </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

  <style>
  :root {
    /* Body fonts */
    --fonts-body: Montserrat, "Open Sans", Helvetica, Arial, sans-serif;
    /* Headline fonts */
    --fonts-headlines: "Dharma Gothic E";
    /* Primary theme color */
    --primary-color: #00263E;
    /* Primary theme text color */
    --primary-text-color: #8B8A8D;
    /* Primary theme link color */
    --primary-link-color: #009EDB;
    /* Secondary color: the background body color */
    --secondary-color: #fcfaf6;
    --secondary-text-color: #4D4D4F;
    /* Highlight text color of table of content */
    --toc-highlight-text-color: #D71920;
  }
</style>

  
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Montserrat:Light,400,500,600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/normalize.css">
  <link rel="stylesheet" href="https://peopleforbikes.github.io/juice.css">
</head>

<body>
  
<header class="box-shadow">
    

<a href="https:&#x2F;&#x2F;peopleforbikes.github.io&#x2F;">
    <div class="logo">
        <img src="https://peopleforbikes.github.io/BNA Mechanics logo-small.svg" alt="logo">
        BNA Mechanics
    </div>
</a>

<nav>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;peopleforbikes.github.io&#x2F;code-of-conduct&#x2F;">Code of conduct</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;peopleforbikes.github.io&#x2F;contributing&#x2F;">Contributing</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;peopleforbikes.github.io&#x2F;standards&#x2F;">Standards</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;peopleforbikes.github.io&#x2F;guidelines&#x2F;">Guidelines</a>
    
    
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;PeopleForBikes">Github ↗</a>
        
    
</nav>

</header>


  <main id="main">
    
    
    
    
    
    <div class="toc">
      <div class="toc-sticky">
        
        <div class="toc-item">
          <a class="subtext" href="https://peopleforbikes.github.io/standards/#standards">Standards</a>
        </div>
        
        
        <div class="toc-item-child">
          <a class="subtext" href="https://peopleforbikes.github.io/standards/#behavioral-standards"><small>- Behavioral standards</small></a>
        </div>
        
        <div class="toc-item-child">
          <a class="subtext" href="https://peopleforbikes.github.io/standards/#operational-standards"><small>- Operational standards</small></a>
        </div>
        
        <div class="toc-item-child">
          <a class="subtext" href="https://peopleforbikes.github.io/standards/#project-standards"><small>- Project Standards</small></a>
        </div>
        
        <div class="toc-item-child">
          <a class="subtext" href="https://peopleforbikes.github.io/standards/#licenses"><small>- Licenses</small></a>
        </div>
        
        <div class="toc-item-child">
          <a class="subtext" href="https://peopleforbikes.github.io/standards/#naming-conventions"><small>- Naming conventions</small></a>
        </div>
        
        <div class="toc-item-child">
          <a class="subtext" href="https://peopleforbikes.github.io/standards/#administrative-tasks"><small>- Administrative tasks</small></a>
        </div>
        
        
        
      </div>
    </div>
    
    

    <div class="content text">
      
<div class="heading-text"></div>
<h1 id="standards">Standards</h1>
<p>These standards represent the way of working of the <a href="https://peopleforbikes.github.io">BNA Mechanics</a> team.</p>
<p>They aim to create an enjoyable contributing culture, while making it obvious
and natural to build high quality deliverables.</p>
<h2 id="behavioral-standards">Behavioral standards</h2>
<h3 id="culture-values">Culture &amp; Values</h3>
<ul>
<li>Pass negatives up, positives all around.</li>
<li>Operate with a self-employed mentality - have agency.</li>
<li>Strive for quality even in the little things.</li>
<li>Don't cling on a mistake just because you spent a lot of time making it.</li>
</ul>
<h3 id="collaboration">Collaboration</h3>
<ul>
<li>We succeed or fail together.</li>
<li>We should feel empowered to pair with anyone to work across the stack.</li>
<li>Before writing any code, we should agree on the design &amp; direction of the
upcoming feature.</li>
<li>Include our users/consumers when determining our features &amp; requirements.</li>
<li>Favor cooperative exploration over debate when you can - you can’t learn and
defend at the same time.</li>
</ul>
<h2 id="operational-standards">Operational standards</h2>
<h3 id="data-driven">Data-driven</h3>
<ul>
<li>Use data wherever available to make the right choices and inform decisions.</li>
<li>If we care about something, we should ensure we have a way to measure it.</li>
</ul>
<h3 id="automation">Automation</h3>
<ul>
<li>Strive to automate everything which is automatable.</li>
</ul>
<h3 id="documentation">Documentation</h3>
<ul>
<li>Write the appropriate documentation for the work we are doing.
<ul>
<li>README.md, Changelog.md, API docs, General documentation, etc.</li>
</ul>
</li>
<li>When breaking down work, we should provide a roadmap for what/how we plan to
iterate to a complete feature.</li>
<li>When creating external documentation for a consumer of our software, we should
solicit feedback from them &amp; update accordingly.</li>
<li>Avoid tribal knowledge.</li>
</ul>
<h3 id="error-handling-as-a-first-class-citizen">Error Handling as a First-Class Citizen</h3>
<ul>
<li>We should plan for and handle errors early, rather than only coding the "happy
path".</li>
<li>We should continually ask "how can this fail?"</li>
<li>If we don't know the right way to handle the error, we should at least have a
place in the code where we can come back to in order to handle it properly.</li>
<li>Maintain a backlog of known issues, and review &amp; prioritize them alongside new
features.</li>
</ul>
<h2 id="project-standards">Project Standards</h2>
<h3 id="general-recommendations">General recommendations</h3>
<ul>
<li>Projects must provide a way to build artifacts using standard tools (i.e. no
custom scripts made for a specific machine/environment)
<ul>
<li>a package or binary depending on the language</li>
<li>a docker image</li>
</ul>
</li>
<li>Projects must include a Changelog following the
<a href="https://keepachangelog.com/en/1.0.0">Keep a Changelog</a> recommendation</li>
<li>Project must adhere to <a href="https://semver.org/">Semantic Versioning</a>
<ul>
<li>Or <a href="https://calver.org/">Calendar Versioning</a> if it makes more sense.</li>
</ul>
</li>
<li>Projects must use Issues and Pull Request templates</li>
<li>Projects must use meaningful labels</li>
<li>Projects must be documented</li>
<li>Projects must automate all their maintenance tasks
<ul>
<li>Must ensure reproducibility</li>
<li>A Makefile, justfile or a package.json at the root of the project is a good
example of how to automate maintenance tasks.</li>
<li>Non trivial commands must be backed by scripts (instead of being written
inline).</li>
</ul>
</li>
<li>Implement REST APIs from business requirements, and document them using the
<a href="https://swagger.io/specification/">OpenAPI 3+ specification</a> (i.e. code first
approach)
<ul>
<li>Generate the <a href="https://swagger.io/specification/">OpenAPI 3+ specification</a> from the server</li>
<li>Generate the clients from the <a href="https://swagger.io/specification/">OpenAPI 3+ specification</a> for any language
needed.
<ul>
<li>Clients must be 100% generated, although they might be <strong>extended</strong> if
needed.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="continuous-integration">Continuous Integration</h3>
<p>The CI rules:</p>
<ul>
<li>Projects must comply with CI task requirements.</li>
<li>Developers must be able to run the tasks locally.</li>
<li>The CI acts as the source of truth.</li>
<li>The master branch must be continually deployable.</li>
</ul>
<p>The <code>PeopleForBikes/.github</code> repository contains starter workflows that should
be used when creating a project.</p>
<h4 id="required-tasks">Required tasks</h4>
<ul>
<li>Formatter</li>
<li>Linters
<ul>
<li>Code</li>
<li>Docs</li>
</ul>
</li>
<li>Static analyzers</li>
<li>Documentation</li>
<li>Unit tests</li>
<li>Feature tests
<ul>
<li>Try to cover 100% of use cases
<ul>
<li>This is more important than the unit test coverage</li>
<li>It will end up increasing unit test coverage anyway</li>
</ul>
</li>
</ul>
</li>
<li>Integration tests
<ul>
<li>Can use network, database, file system, storage, etc.</li>
<li><strong>Are NOT included in the code coverage</strong></li>
</ul>
</li>
<li>Coverage
<ul>
<li>Reaching 100% coverage is not the end goal</li>
<li>Must never regress</li>
<li>Think about your teammates who worked on increasing this coverage</li>
<li>Use online services like <a href="https://coveralls.io">coveralls</a> or
<a href="https://codecov.io">codecov</a></li>
</ul>
</li>
</ul>
<h3 id="scm">SCM</h3>
<ul>
<li>Write good commit messages
<ul>
<li><a href="https://cbea.ms/git-commit/">How to Write a Git Commit Message</a></li>
<li><a href="../contributing/#commit-example">BNA Mechanics Contributing Guidelines</a></li>
</ul>
</li>
</ul>
<h3 id="testing">Testing</h3>
<ul>
<li>Tests should be considered as production level code.</li>
<li>Eliminate failing &amp; flaky tests.</li>
<li>Tests should be run on every PR, automatically.</li>
<li>We should aim to write unit, integration and end-to-end tests (where it makes
sense).</li>
<li>If a PR does not have tests, we should feel empowered to question why.</li>
<li>When a bug is found , we should aim to add a test that exercises the bug, so
it does not happen again.</li>
<li>Use doctest to test the happy path.
<ul>
<li>This will also enhance the quality of the documentation by providing short
examples to the users.</li>
</ul>
</li>
</ul>
<h2 id="licenses">Licenses</h2>
<p>The <a href="https://peopleforbikes.github.io">BNA Mechanics</a> team selected the following licenses to use depending on the
type of work being done:</p>
<ul>
<li><a href="https://peopleforbikes.github.io/standards/#software">MIT</a> license to be used for code</li>
<li><a href="https://peopleforbikes.github.io/standards/#content">CC-BY</a> license to be used for content other than code
(documentation, media)</li>
<li><a href="https://peopleforbikes.github.io/standards/#non-substantial-works">CC0</a> license to be used for snippets, data,
boilerplate</li>
<li>For something else or special circumstances, open an issue in the specific
project or contact <a href="mailto:research@peopleforbikes.org">the team</a>.</li>
</ul>
<h3 id="software">Software</h3>
<p>Default: <a href="https://choosealicense.com/licenses/mit/">MIT</a></p>
<p>For most substantial <a href="https://peopleforbikes.github.io">BNA Mechanics</a> open source software projects, there's a
simple default answer: <a href="https://choosealicense.com/licenses/mit/">MIT</a>.</p>
<p><a href="https://choosealicense.com/licenses/mit/">MIT</a> is the
<a href="https://github.com/blog/1964-open-source-license-usage-on-github-com">most popular license</a>
for public open source projects on <a href="http://github.com">github</a>. It has great cultural acceptance
and is simple to understand, use, and comply with:</p>
<ul>
<li>Add a <code>LICENSE.md</code> file at the root of the project, with the <a href="https://choosealicense.com/licenses/mit/">MIT</a> license
text and PeopleForBikes copyright notice: "Copyright (c) 2022 PeopleForBikes".
When using the <a href="https://peopleforbikes.github.io/standards/#create-a-new-github-repository">GitHub CLI</a> to create a new
project, the file will be automatically added. Otherwise, simply copy the
license text from <a href="https://choosealicense.com/licenses/mit">https://choosealicense.com/licenses/mit</a></li>
<li>Keep that <code>LICENSE.md</code> file and copyright notice in any modified versions.</li>
</ul>
<p>If you feel that <a href="https://choosealicense.com/licenses/mit/">MIT</a> is really the wrong license for a substantial <a href="https://peopleforbikes.github.io">BNA
Mechanics</a> open source project, let's talk with <a href="mailto:research@peopleforbikes.org">the team</a>.</p>
<h3 id="content">Content</h3>
<p>Default: <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a></p>
<p>Occasionally we publish substantial non-software content (e.g., documentation,
media) that we want to give others permission to copy, modify, and distribute if
they give us credit and don't use our trademarks. That's what <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a>
allows. It's roughly equivalent to <a href="https://choosealicense.com/licenses/mit/">MIT</a> in terms of being permissive and having
good cultural acceptance, but is designed for non-software works (e.g., license
notice can be provided with a link rather than including a copy of the license
text).</p>
<p>To use <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a>:</p>
<ul>
<li>In the case an entire repository should be released under <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a>: add a
<code>LICENSE.md</code> file with the <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a> license text. It is unlikely you will
want to do this, and it is not facilitated by the web interface license
picker. The license text is available at
<a href="https://creativecommons.org/licenses/by/4.0/legalcode.txt">https://creativecommons.org/licenses/by/4.0/legalcode.txt</a> but check with the
team to ensure this is what you really want.</li>
<li>In the case particular files or parts of content (e.g., documentation or a
media file) should be released under <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a>, note this precisely in the
repository's <code>README.md</code>.</li>
<li>If the released material is rendered or published, e.g., as or in web pages,
it can also be useful to include a <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a> notice there, e.g., "This
documentation is released under <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a>", with a link to
<a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a> or the repository
<code>README.md#Licenses</code> depending on the complexity of the situation. Please ask
the team for help getting it right.</li>
<li>To use material under <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a>, license notice and attribution must be
preserved. It can be useful to provide an example of how to do so.</li>
</ul>
<p>If you feel that <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a> is really the wrong license for substantial GitHub
open source non-software content, let's talk with <a href="mailto:research@peopleforbikes.org">the team</a>.</p>
<h3 id="non-substantial-works">Non-substantial works</h3>
<p>Default: <a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a></p>
<p><a href="https://choosealicense.com/licenses/mit/">MIT</a> and <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC-BY-4.0</a> conditions are easy to comply with, but sometimes projects
are better served by not having any conditions, not even a requirement for
attribution.</p>
<p><a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a> waives all copyright restrictions but reserves trademark and patent
rights, making it an easy unconditional license for PeopleForBikes material
when:</p>
<ul>
<li>burden to user of maintaining copyright notices forever is large relative to
incremental value of using licensed material, and</li>
<li>there is no demonstrable business value from mandating maintenance of
copyright notices</li>
</ul>
<h4 id="examples">Examples</h4>
<ol>
<li>Sample snippets; eg those under <a href="https://developer.github.com/guides/">https://developer.github.com/guides/</a></li>
<li>Starter or other boilerplate material</li>
<li>Purely functional configuration with minimal expressivity that we don't think
is/ought be subject to copyright anyway; add certainty that there are no
restrictions</li>
<li>Data in which there is clearly no demonstrable business value from mandating
maintenance of copyright notices</li>
<li>More substantial code/material alongside/in same repo as one of the above and
still no demonstrable business value from restrictions; just use an
unconditional license for more substantial bits to minimize number of
licenses involved</li>
</ol>
<p>To use <a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a>:</p>
<ul>
<li>In the case an entire repository should be released under <a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a>: add a
<code>LICENSE.md</code> file with the <a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a> license text. You can do this via the web
interface on <a href="http://github.com">github</a> (a license picker will automatically appear when you add
a new file called <code>LICENSE.md</code>) or by copying the license text from
<a href="https://choosealicense.com/licenses/cc0-1.0">https://choosealicense.com/licenses/cc0-1.0</a></li>
<li>In the case particular files or parts of content (e.g., code snippets in
documentation) should be released under <a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a>, note this precisely in the
repository's <code>README.md</code>.</li>
<li>If the released material is rendered or published, e.g., as or in web pages,
it can also be useful to include a <a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a> notice there, e.g., "Code samples
in this documentation are released under CC0-1.0", with a link to
<a href="https://creativecommons.org/publicdomain/zero/1.0/">https://creativecommons.org/publicdomain/zero/1.0/</a> or the repository
README.md#Licenses depending on the complexity of the situation. Please ask
the team for help getting it right.</li>
<li>Note there are zero copyright license requirements when using material
released under <a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a>, but it is usually best practice to maintain license
notices and attribution anyway, as you would for <a href="https://choosealicense.com/licenses/mit/">MIT</a> and [CC-BY] software
and non-software above.</li>
</ul>
<p>Have questions about whether what you're working on matches one of the above
example classes and meets the two criteria above, or feel that <a href="https://choosealicense.com/licenses/cc0-1.0/">CC0-1.0</a> isn't
the right license for those cases? Let's talk with <a href="mailto:research@peopleforbikes.org">the team</a>.</p>
<h2 id="naming-conventions">Naming conventions</h2>
<h3 id="versioning">Versioning</h3>
<ul>
<li>
<p>Assets should alway be versioned, following the <a href="https://calver.org/">calver</a> specification with
the <code>[v]YY.0M[.Minor]</code> scheme, where:</p>
<ul>
<li>The letter "v" (for "version") precedes the scheme (optional).</li>
<li><code>YY</code> represents the year with 2 digits (e.g.: 22 for 2022)</li>
<li><code>0M</code> represents the zero-padded month of the year (e.g.: 01, 02, 11, 12)</li>
<li><code>Minor</code> represents the iteration number starting at one (1), without
zero-padding (e.g: 1, 2, 10, etc.). It must be omitted when it is equal to
zero (0).</li>
</ul>
<p>For instance, it is common to go through several iterations for a <code>template</code>,
or several revisions of a document throughout the year:</p>
<ul>
<li>template-scorecard-v22.05.4.svg</li>
<li>city_ratings_v22.11.csv</li>
<li>chicago_illinois-scorecard-v24.05.pdf</li>
<li>chicago_illinois-scorecard-v24.05.3.pdf</li>
</ul>
</li>
</ul>
<h3 id="visual-assets">Visual assets</h3>
<p>Visual assets should be named in a way where contributors can easily extract the
relevant information directly from the file name itself. There must not be any
complicated nested folder structure necessary.</p>
<ul>
<li>
<p>The global naming convention must respect the following pattern:</p>
<p><code>&lt;type&gt;-&lt;name&gt;-&lt;description&gt;[-&lt;size&gt;][-&lt;orientation&gt;].&lt;extension&gt;</code></p>
</li>
<li>
<p><code>&lt;type&gt;</code> must be one of the following:</p>
<ul>
<li>bg (short for background)</li>
<li>icon</li>
<li>logo</li>
<li>template</li>
</ul>
</li>
<li>
<p>Lower case only</p>
</li>
<li>
<p>Do not use spaces, use dashes</p>
</li>
<li>
<p><code>&lt;size&gt;</code> can be simplified if the asset is a square. E.g. “512” would mean
“512x512”</p>
<ul>
<li>Images with the <code>.svg</code> <code>&lt;extension&gt;</code> do not have a size since they can be
resized at will</li>
</ul>
</li>
<li>
<p><code>&lt;orientation&gt;</code> (or shape) can optionally be added if it provides value</p>
<p>Valid values are:</p>
<ul>
<li>square</li>
<li>stacked</li>
<li>horizontal</li>
<li>vertical</li>
</ul>
</li>
</ul>
<h4 id="examples-1">Examples</h4>
<ul>
<li>logo-bna-full-1015x596.png</li>
<li>logo-bna-full-dark-white-text-1015×597.png</li>
<li>logo-pfb-no-text-square.svg</li>
</ul>
<h2 id="administrative-tasks">Administrative tasks</h2>
<p>We recommend using the <a href="https://cli.github.com/">GitHub CLI</a> in general as we
find it very convenient, but even if it is not your cup of tea, it should at
least be used to create new repositories with the right parameters from the get
go.</p>
<p>All the operations can also be performed via the <a href="http://github.com">GitHub</a> website.</p>
<blockquote>
<p><strong>Remark: these operations require administrator privileges.</strong></p>
</blockquote>
<h3 id="create-a-new-github-repository">Create a new GitHub repository</h3>
<p>Start by defining the <code>PFB</code> variables:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="font-weight:bold;color:#a71d5d;">export </span><span>PFB_REPO</span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#183691;">my-project
</span><span style="font-weight:bold;color:#a71d5d;">export </span><span>PFB_REPO_DESCRIPTION</span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#183691;">&quot;Describe my project in one line.&quot;
</span><span style="font-weight:bold;color:#a71d5d;">export </span><span>PFB_REPO_LANG</span><span style="font-weight:bold;color:#a71d5d;">=&lt;</span><span>Node,Python,Rust</span><span style="font-weight:bold;color:#a71d5d;">&gt; </span><span style="font-style:italic;color:#969896;"># Choose the appropriate language
</span></code></pre>
<p>Then, depending of the type of project being created, the bootstrap process
varies.</p>
<h4 id="bootstrap-a-nextjs-project">Bootstrap a NextJS project</h4>
<p>Create the NextJS app:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>npx create-next-app@latest \
</span><span>  --app \
</span><span>  --ts \
</span><span>  --eslint \
</span><span>  --src-dir \
</span><span>  --import-alias @/</span><span style="font-weight:bold;color:#a71d5d;">* </span><span>\
</span><span>  --use-pnpm \
</span><span>  --no-tailwind \
</span><span>  </span><span style="color:#183691;">&quot;${</span><span>PFB_REPO</span><span style="color:#183691;">}&quot;
</span></code></pre>
<p>Import the BNA mechanics files:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#62a35c;">cd </span><span>${PFB_REPO}
</span><span>TEMPLATE_GITHUB_TMP</span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#183691;">&quot;$(</span><span>mktemp -d</span><span style="color:#183691;">)/template&quot;
</span><span>git clone --depth</span><span style="font-weight:bold;color:#a71d5d;">=</span><span>1 git@github.com:PeopleForBikes/bna-mechanics-project-template </span><span style="color:#183691;">&quot;${</span><span>TEMPLATE_GITHUB_TMP</span><span style="color:#183691;">}&quot;
</span><span>rsync -vrlp --exclude </span><span style="color:#183691;">&#39;.git&#39; &quot;${</span><span>TEMPLATE_GITHUB_TMP</span><span style="color:#183691;">}/&quot;</span><span> .
</span><span style="color:#62a35c;">echo </span><span>-e </span><span style="color:#183691;">&quot;# ${</span><span>PFB_REPO</span><span style="color:#183691;">}\n\n${</span><span>PFB_REPO_DESCRIPTION</span><span style="color:#183691;">}&quot; </span><span style="font-weight:bold;color:#a71d5d;">&gt;</span><span> README.md
</span></code></pre>
<p>Check the <code>.github/workflows</code> folder and remove the workflows that do not belong
to the project.</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>git add .
</span><span>git commit -sam </span><span style="color:#183691;">&quot;Import BNA Mechanics files&quot; </span><span>\
</span><span>  -m </span><span style="color:#183691;">&quot;Imports the BNA Mechanics files from the project template.&quot;
</span></code></pre>
<p>Configure the GitHub CLI to use SSH:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>gh config set git_protocol ssh -h github.com
</span></code></pre>
<p>Create the GitHub repository:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>gh repo create \
</span><span>  </span><span style="color:#183691;">&quot;PeopleForBikes/${</span><span>PFB_REPO</span><span style="color:#183691;">}&quot; </span><span>\
</span><span>  --public \
</span><span>  --description </span><span style="color:#183691;">&quot;${</span><span>PFB_REPO_DESCRIPTION</span><span style="color:#183691;">}&quot; </span><span>\
</span><span>  --source</span><span style="font-weight:bold;color:#a71d5d;">=</span><span>. \
</span><span>  --remote</span><span style="font-weight:bold;color:#a71d5d;">=</span><span>upstream \
</span><span>  --push
</span></code></pre>
<h4 id="bootstrap-a-rust-python-project">Bootstrap a Rust/Python project</h4>
<p>Create the GitHub repository:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>gh repo create \
</span><span>  </span><span style="color:#183691;">&quot;PeopleForBikes/${</span><span>PFB_REPO</span><span style="color:#183691;">}&quot; </span><span>\
</span><span>  --public \
</span><span>  --template </span><span style="color:#183691;">&quot;PeopleForBikes/bna-mechanics-project-template&quot; </span><span>\
</span><span>  --description </span><span style="color:#183691;">&quot;${</span><span>PFB_REPO_DESCRIPTION</span><span style="color:#183691;">}&quot;
</span><span>git clone </span><span style="color:#183691;">&quot;git@github.com:PeopleForBikes/${</span><span>PFB_REPO</span><span style="color:#183691;">}&quot;
</span></code></pre>
<p>Initialize the project, depending on the programming language:</p>
<ul>
<li>Rust: <code>cargo init</code></li>
<li>Python:
<code>uv init --name "${PFB_REPO}" --description "${PFB_REPO_DESCRIPTION}"</code></li>
</ul>
<p>Add a <code>README.md</code> and the appropriate <code>.gitignore</code> file:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#62a35c;">cd </span><span style="color:#183691;">&quot;${</span><span>PFB_REPO</span><span style="color:#183691;">}&quot;
</span><span style="color:#62a35c;">echo </span><span>-e </span><span style="color:#183691;">&quot;# ${</span><span>PFB_REPO</span><span style="color:#183691;">}\n\n${</span><span>PFB_REPO_DESCRIPTION</span><span style="color:#183691;">}&quot; </span><span style="font-weight:bold;color:#a71d5d;">&gt;</span><span> README.md
</span><span>curl https://raw.githubusercontent.com/github/gitignore/main/${PFB_REPO_LANG}.gitignore \
</span><span>  </span><span style="font-weight:bold;color:#a71d5d;">| </span><span>sort -u \
</span><span>  </span><span style="font-weight:bold;color:#a71d5d;">| </span><span>grep -v -e </span><span style="color:#183691;">&quot;^#&quot; </span><span>\
</span><span>  </span><span style="font-weight:bold;color:#a71d5d;">| </span><span>grep -v -e </span><span style="color:#183691;">&quot;^$&quot; </span><span>\
</span><span>  </span><span style="font-weight:bold;color:#a71d5d;">&gt;</span><span> .gitignore
</span></code></pre>
<p>Then submit the changes:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>git add .
</span><span>git commit -sam </span><span style="color:#183691;">&quot;Initial import&quot;</span><span> -m </span><span style="color:#183691;">&quot;Imports project scaffolding.&quot;
</span><span>git push
</span></code></pre>
<h4 id="all-projects">All projects</h4>
<p>Check the <code>.github/workflows</code> folder and remove the workflows that do not belong
to the project.</p>
<p>Apply the labels with <a href="https://github.com/rgreinho/labelr-rs">labelr</a>:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>labelr --organization PeopleForBikes --sync .github/labels.yml
</span></code></pre>
<p>Finally, setup the branch protection:</p>
<blockquote>
<p><strong>The checks may need to be adjusted based on the language that was selected
for the project.</strong></p>
</blockquote>
<pre data-lang="json" style="background-color:#ffffff;color:#323232;" class="language-json "><code class="language-json" data-lang="json"><span>echo &#39;{
</span><span>  </span><span style="color:#183691;">&quot;required_status_checks&quot;</span><span>: {
</span><span>    </span><span style="color:#183691;">&quot;strict&quot;</span><span>: </span><span style="color:#0086b3;">true</span><span>,
</span><span>    </span><span style="color:#183691;">&quot;checks&quot;</span><span>: [{ </span><span style="color:#183691;">&quot;context&quot;</span><span>: </span><span style="color:#183691;">&quot;ci-rust / lint&quot;</span><span>}, {</span><span style="color:#183691;">&quot;context&quot;</span><span>: </span><span style="color:#183691;">&quot;ci-rust / test&quot;</span><span>}, {</span><span style="color:#183691;">&quot;context&quot;</span><span>: </span><span style="color:#183691;">&quot;ci-rust / build&quot;</span><span>}]
</span><span>  },
</span><span>  </span><span style="color:#183691;">&quot;enforce_admins&quot;</span><span>: </span><span style="color:#0086b3;">false</span><span>,
</span><span>  </span><span style="color:#183691;">&quot;required_pull_request_reviews&quot;</span><span>: {
</span><span>    </span><span style="color:#183691;">&quot;dismiss_stale_reviews&quot;</span><span>: </span><span style="color:#0086b3;">true</span><span>,
</span><span>    </span><span style="color:#183691;">&quot;required_approving_review_count&quot;</span><span>: </span><span style="color:#0086b3;">1
</span><span>  },
</span><span>  </span><span style="color:#183691;">&quot;restrictions&quot;</span><span>: </span><span style="color:#0086b3;">null
</span><span>}&#39; &gt;/tmp/config-branch-rules
</span></code></pre>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>gh api \
</span><span>  --method PUT \
</span><span>  --preview luke-cage \
</span><span>  --input /tmp/config-branch-rules \
</span><span>  repos/PeopleForBikes/${PFB_REPO}/branches/main/protection
</span></code></pre>
<p>As the final touch, some repository settings can also be adjusted:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span>gh repo edit --enable-merge-commit</span><span style="font-weight:bold;color:#a71d5d;">=</span><span>false --delete-branch-on-merge
</span></code></pre>
<h3 id="archive-a-public-repository">Archive a public repository</h3>
<p>Archive repositories to indicate that they are unmaintained and make them
read-only.</p>
<p>Start by editing the repository's <code>README.md</code> file to add the following note at
the top:</p>
<pre data-lang="txt" style="background-color:#ffffff;color:#323232;" class="language-txt "><code class="language-txt" data-lang="txt"><span>&gt; **NOTE**: _This repository is no longer supported or updated by the BNA
</span><span>&gt; Mechanics team. If you wish to continue to develop this code yourself, we
</span><span>&gt; recommend you fork it._
</span></code></pre>
<p>Close all open issues and pull requests and archive the repository:</p>
<pre data-lang="bash" style="background-color:#ffffff;color:#323232;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="font-weight:bold;color:#a71d5d;">for</span><span> n </span><span style="font-weight:bold;color:#a71d5d;">in </span><span>$(gh issue list --state open --json number --jq .</span><span style="font-weight:bold;color:#a71d5d;">[]</span><span>.number)</span><span style="font-weight:bold;color:#a71d5d;">; do </span><span>gh issue close ${n} --reason </span><span style="color:#183691;">&quot;This repository was archived.&quot;</span><span style="font-weight:bold;color:#a71d5d;">; done
</span><span style="font-weight:bold;color:#a71d5d;">for</span><span> n </span><span style="font-weight:bold;color:#a71d5d;">in </span><span>$(gh pr list --state open --json number --jq .</span><span style="font-weight:bold;color:#a71d5d;">[]</span><span>.number)</span><span style="font-weight:bold;color:#a71d5d;">; do </span><span>gh pr close ${n} --comment </span><span style="color:#183691;">&quot;This repository was archived.&quot;</span><span style="font-weight:bold;color:#a71d5d;">; done
</span><span>gh repo archive -y
</span></code></pre>


    </div>

    
    
  </main>

  
<footer>
  <small class="subtext">
    Created by <a href="https://www.peopleforbikes.org/">PeopleForBikes</a>
  </small>
</footer>

</body>
<script>
  function highlightNav(heading) {
    let pathname = location.pathname;
    document.querySelectorAll(".toc a").forEach((item) => {
      item.classList.remove("active");
    });
    document.querySelector(".toc a[href$='" + pathname + "#" + heading + "']").classList.add("active");
  }

  let currentHeading = "";
  window.onscroll = function () {
    let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
    let elementArr = [];

    h.forEach(item => {
      if (item.id !== "") {
        elementArr[item.id] = item.getBoundingClientRect().top;
      }
    });
    elementArr.sort();
    for (let key in elementArr) {
      if (!elementArr.hasOwnProperty(key)) {
        continue;
      }
      if (elementArr[key] > 0 && elementArr[key] < 300) {
        if (currentHeading !== key) {
          highlightNav(key);
          currentHeading = key;
        }
        break;
      }
    }
  }
</script>

</html>
